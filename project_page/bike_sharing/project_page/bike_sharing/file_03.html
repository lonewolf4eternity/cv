<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../css/project_details.css" type="text/css">
    <title>Dashboard</title>
    <script type="text/javascript">
        document.addEventListener (
            'contextmenu', function (e) {
                e.preventDefault();
            }
        );
    </script>
    <script type="text/javascript">
        document.addEventListener (
            'keydown', function (e) {
                if (
                    e.ctrlKey && e.keyCode === 'u'
                ) {
                    e.preventDefault();
                }
            }
        );
    </script>
    <script type="text/javascript">
        document.onkeydown = function (e) {
            if (
                e.ctrlKey && (
                    e.keyCode === 67 ||
                    e.keyCode === 86 ||
                    e.keyCode === 85 ||
                    e.keyCode === 117
                )
            ) {
                return false;
            } else {
                return true;
            }
        };
    </script>
</head>
<body>
    <header>
        <button class="x-btn" id="close-dashboard-btn">X</button><!--
        <a href="https://bikesharingdataset.streamlit.app/" target="_blank"><button class="all-btn">Dashboard</button></a>-->
        <a href="../bike_sharing/file_00.html"><button class="all-btn">Dashboard</button></a>
        <a href="../bike_sharing/file_01.html"><button class="all-btn">Dataset</button></a>
        <a href="../bike_sharing/file_02.html"><button class="all-btn">Details</button></a>
        <a href="../bike_sharing/file_03.html"><button class="all-btn">Python Code</button></a>
    </header>
    <div class="content">
        <h1>Python Code</h1>
    </div>
    <div class="content">
        <h2>Bike Sharing Project</h2>
    </div>
    <div class="content" id="python">
        <code>
            <span style="color: aquamarine;">import</span> streamlit <span style="color: aquamarine;">as</span> st
            <br>
            <span style="color: aquamarine;">import</span> numpy <span style="color: aquamarine;">as</span> np
            <br>
            <span style="color: aquamarine;">import</span> pandas <span style="color: aquamarine;">as</span> pd
            <br>
            <span style="color: aquamarine;">import</span> matplotlib.pyplot <span style="color: aquamarine;">as</span> plt
            <br>
            <span style="color: aquamarine;">import</span> seaborn <span style="color: aquamarine;">as</span> sns
            <br>
            <br>
            <span style="color: darkgray;">#load data</span>
            <br>
            day_df <span style="color: fuchsia;">=</span> pd.<span style="color: cornflowerblue;">read_csv</span>(<span style="color: coral;">'day.csv'</span>) <span style="color: darkgray;"># menyesuaikan path tempat file terseimpan.</span>
            <br>
            hour_df <span style="color: fuchsia;">=</span> pd.<span style="color: cornflowerblue;">read_csv</span>(<span style="color: coral;">'hour.csv'</span>) <span style="color: darkgray;"># menyesuaikan path tempat file terseimpan.</span>
            <br>
            <br>
            <span style="color: darkgray;">#Convert datetime columns to datetime type</span>
            <br>
            datetime_column <span style="color: fuchsia;">=</span> <span style="color: burlywood;">[</span><span style="color: coral;">"dteday"</span><span style="color: burlywood;">]</span>
            <br>
            <span style="color: aquamarine;">for</span> column <span style="color: aquamarine;">in</span> datetime_column :
            <br>
            <span style="padding-left: 35px;">day_df</span><span style="color: burlywood;">[</span>column<span style="color: burlywood;">]</span><span style="color: fuchsia;"> =</span> pd.<span style="color: cornflowerblue;">to_datetime</span> (day_df</span><span style="color: burlywood;">[</span>column<span style="color: burlywood;">]</span>)
            <br>
            <span style="padding-left: 35px;">hour_df</span><span style="color: burlywood;">[</span>column<span style="color: burlywood;">]</span><span style="color: fuchsia;"> =</span> pd.<span style="color: cornflowerblue;">to_datetime</span> (hour_df</span><span style="color: burlywood;">[</span>column<span style="color: burlywood;">]</span>)
            <br>
            <br>
            <span style="color: darkgray;"># Mapping season, yr (year), and mnth (month) columns</span>
            <br>
            season_mapping <span style="color: fuchsia;">=</span> <span style="color: burlywood;">{</span>
                <br>
                <span style="padding-left: 35px; color: chartreuse ;">1</span>: <span style="color: coral;">"spring"</span>, <span style="color: chartreuse ;">2</span>: <span style="color: coral;">"summer"</span>, <span style="color: chartreuse ;">3</span>: <span style="color: coral;">"fall"</span>, <span style="color: chartreuse ;">4</span>: <span style="color: coral;">"winter"</span>
                <br>
                <span style="color: burlywood;">}</span>
            <br>
            yr_mapping <span style="color: fuchsia;">=</span> <span style="color: burlywood;">{</span>
                <br>
                <span style="padding-left: 35px; color: chartreuse ;">0</span>: <span style="color: chartreuse ;">2011</span>, <span style="color: chartreuse ;">1</span>: <span style="color: chartreuse ;">2012</span>
                <br>
                <span style="color: burlywood;">}</span>
            <br>
            mnth_mappinng <span style="color: fuchsia;">=</span> <span style="color: burlywood;">{</span>
                <br>
                <span style="padding-left: 35px; color: chartreuse ;">1</span>: <span style="color: coral;">"January"</span>, <span style="color: chartreuse ;">2</span>: <span style="color: coral;">"February"</span>, <span style="color: chartreuse ;">3</span>: <span style="color: coral;">"March"</span>, <span style="color: chartreuse ;">4</span>: <span style="color: coral;">"April"</span>, <span style="color: chartreuse ;">5</span>: <span style="color: coral;">"May"</span>, <span style="color: chartreuse ;">6</span>: <span style="color: coral;">"June"</span>, <span style="color: chartreuse ;">7</span>: <span style="color: coral;">"July"</span>, <span style="color: chartreuse ;">8</span>: <span style="color: coral;">"August"</span>, <span style="color: chartreuse ;">9</span>: <span style="color: coral;">"September"</span>, <span style="color: chartreuse ;">10</span>: <span style="color: coral;">"October"</span>, <span style="color: chartreuse ;">11</span>: <span style="color: coral;">"November"</span>, <span style="color: chartreuse ;">12</span>: <span style="color: coral;">"December"</span>
                <br>
                <span style="color: burlywood;">}</span>
            <br>
            <br>
            day_df <span style="color: burlywood;">[</span><span style="color: coral;">'season'</span><span style="color: burlywood;">]</span> <span style="color: fuchsia;">=</span> day_df <span style="color: burlywood;">[</span><span style="color: coral;">'season'</span><span style="color: burlywood;">]</span>.<span style="color: cornflowerblue;">replace</span>(season_mapping)
            <br>
            day_df <span style="color: burlywood;">[</span><span style="color: coral;">'yr'</span><span style="color: burlywood;">]</span> <span style="color: fuchsia;">=</span> day_df <span style="color: burlywood;">[</span><span style="color: coral;">'yr'</span><span style="color: burlywood;">]</span>.<span style="color: cornflowerblue;">replace</span>(yr_mapping)
            <br>
            day_df <span style="color: burlywood;">[</span><span style="color: coral;">'mnth'</span><span style="color: burlywood;">]</span> <span style="color: fuchsia;">=</span> day_df <span style="color: burlywood;">[</span><span style="color: coral;">'mnth'</span><span style="color: burlywood;">]</span>.<span style="color: cornflowerblue;">replace</span>(mnth_mapping)
            <br>
            <br>
            hour_df <span style="color: burlywood;">[</span><span style="color: coral;">'season'</span><span style="color: burlywood;">]</span> <span style="color: fuchsia;">=</span> hour_df <span style="color: burlywood;">[</span><span style="color: coral;">'season'</span><span style="color: burlywood;">]</span>.<span style="color: cornflowerblue;">replace</span>(season_mapping)
            <br>
            hour_df <span style="color: burlywood;">[</span><span style="color: coral;">'yr'</span><span style="color: burlywood;">]</span> <span style="color: fuchsia;">=</span> hour_df <span style="color: burlywood;">[</span><span style="color: coral;">'yr'</span><span style="color: burlywood;">]</span>.<span style="color: cornflowerblue;">replace</span>(yr_mapping)
            <br>
            hour_df <span style="color: burlywood;">[</span><span style="color: coral;">'mnth'</span><span style="color: burlywood;">]</span> <span style="color: fuchsia;">=</span> hour_df <span style="color: burlywood;">[</span><span style="color: coral;">'mnth'</span><span style="color: burlywood;">]</span>.<span style="color: cornflowerblue;">replace</span>(mnth_mapping)
            <br>
            <br>
            clean_day_df <span style="color: fuchsia;">=</span> day_df
            <br>
            clean_hour_df <span style="color: fuchsia;">=</span> hour_df
            <br>
            <br>
            <span style="color: darkgray;"># Calculate rents by season</span>
            <br>
            rents_by_season <span style="color: fuchsia;">=</span> clean_day_df.<span style="color: cornflowerblue;">groupby</span>(<span style="color: coral;">'season'</span>)<span style="color: burlywood;">[</span>
                <br>
                <span style="padding-left: 35px; color: burlywood;">[</span>
                    <br>
                    <span style="padding-left: 70px; color: coral;">'casual'</span>, <span style="color: coral;">'registered'</span>, <span style="color: coral;">'cnt'</span>
                    <br>
                    <span style="padding-left: 35px; color: burlywood;">]</span>
                <br>
                <span style="color: burlywood;">]</span>.<span style="color:cornflowerblue ;">mean</span>().<span style="color:cornflowerblue ;">reset_index</span>()
            <br>
            rents_by_season <span style="color: fuchsia;">=</span> rents_by_season.<span style="color: cornflowerblue;">rename</span>(
                <br>
                <span style="padding-left: 35px;">columns</span> <span style="color: fuchsia;">=</span> <span style="color: burlywood;">{</span>
                    <br>
                    <span style="padding-left: 70px; color: coral;">'cnt'</span>: <span style="color: coral;">'total_average'</span>
                <br>
                <span style="padding-left: 35px; color: burlywood;">}</span>
            <br>
            ).<span style="color: cornflowerblue;">astype</span>(
                <br>
                <span style="padding-left: 35px; color: burlywood;">{</span>
                    <br>
                    <span style="padding-left: 70px; color: coral;">'casual'</span>: int, <span style="color: coral;">'registered'</span>: int, <span style="color: coral;">'total_average'</span>: int
                <br>
                <span style="padding-left: 35px; color: burlywood;">}</span>
            <br>
            ).<span style="color: cornflowerblue;">sort_value</span>(
                <br>
                <span style="padding-left: 35px;">by</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">'total_average'</span>, ascending <span style="color: fuchsia;">=</span> <span style="color: aquamarine;">False</span>
            <br>
            )
            <br>
            <br>
            <span style="color: darkgray;"># Calculate contribution by hour</span>
            <br>
            contribution_by_hour <span style="color: fuchsia;">=</span> clean_hour_df.<span style="color: cornflowerblue;">groupby</span> (<span style="color:coral";>'hr'</span>).<span style="color:cornflowerblue;">agg</span> (
                <br>
                <span style="padding-left: 35px;">avg_casual</span> <span style="color: fuchsia;">=</span> (
                    <br>
                    <span style="padding-left: 70px; color: coral;">'casual'</span>, <span style="color: coral;">'mean'</span>
                <br>
                <span style="padding-left: 35px;">)</span>, avg_register <span style="color: fuchsia;">=</span> (
                    <br>
                    <span style="padding-left: 70px; color: coral;">'registered'</span>, <span style="color: coral;">'mean'</span>
                <br>
                <span style="padding-left: 35px;">)</span>, total_average <span style="color: fuchsia;">=</span> (
                    <br>
                    <span style="padding-left: 70px; color: coral;">'cnt'</span>, <span style="color: coral;">'mean'</span>
                <br>
                <span style="padding-left: 35px;">)</span>
            <br>
            ).<span style="color: cornflowerblue;">reset_index</span> ().<span style="color: cornflowerblue;">astype</span> (
                <br>
                <span style="padding-left: 35px; color: coral;">'avg_casual'</span> : int, <span style="color: coral;">'avg_register'</span> : int, <span style="color: coral;">'total_average'</span> : int
            <br>
            )
            <br>
            <br>
            <span style="color: darkgray;"># Streamlit App</span>
            <br>
            st.<span style="color: cornflowerblue;">title</span> (<span style="color: coral;">"Dashboard Sewa Sepeda"</span>)
            <br>
            <br>
            <span style="color: darkgray;"># Display rents by season chart with different colors and values</span>
            <br>
            st.<span style="color: cornflowerblue;">subheader</span> (<span style="color: coral;">"Sewa per Musim"</span>)
            <br>
            <br>
            fig_season <span style="color: fuchsia;">=</span> plt.<span style="color: cornflowerblue;">figure</span> ()
            <br>
            bar_plot <span style="color: fuchsia;">=</span> sns.<span style="color: cornflowerblue;">barplot</span> (
                <br>
                <span style="padding-left: 35px;">x</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">'season'</span>,
                <br>
                <span style="padding-left: 35px;">y</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">'total_average'</span>,
                <br>
                <span style="padding-left: 35px;">data</span> <span style="color: fuchsia;">=</span> rents_by_season,
                <br>
                <span style="padding-left: 35px;">palette</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">'pastel'</span>,
                <br>
                <span style="padding-left: 35px;">hue</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">'season'</span>,
            <br>
            )
            <br>
            <br>
            <span style="color: aquamarine;">for</span> index, values <span style="color: aquamarine;">in</span> enumerate (
                <br>
                <span style="padding-left: 35px;">rents_by_season</span> <span style="color: burlywood;">[</span>
                <br>
                <span style="padding-left: 35px; color: coral;">'total_average'</span>
                <br>
                <span style="padding-left: 35px; color: burlywood;">]</span>
            <br>
            ):
                <br>
                <span style="padding-left: 35px;">bar_plot.</span><span style="color: cornflowerblue;">text</span> (
                    <br>
                    <span style="padding-left: 70px;">index,</span>
                    <br>
                    <span style="padding-left: 70px;">value,</span>
                    <br>
                    <span style="padding-left: 70px;">str(value),</span>
                    <br>
                    <span style="padding-left: 70px;">ha</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">'center'</span>
                    <br>
                    <span style="padding-left: 70px;">va</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">'bottom'</span>
                <br>
                <span style="padding-left: 35px;">)</span>
            <br>
            st.<span style="color: cornflowerblue;">pyplot</span> (fig_season)
            <br>
            <br>
            <span style="color: darkgray;"># Display rents by season table</span>
            <br>
            st.<span style="color: cornflowerblue;">subheader</span> (<span style="color: coral;">"Tabel Sewa per Musim"</span>)
            <br>
            st.<span style="color: cornflowerblue;">table</span> (rents_by_season.<span style="color: cornflowerblue;">set_index</span> (<span style="color: coral">'season'</span>))
            <br>
            <br>
            <span style="color: darkgray;"># Display contribution by hour chart with all values and increased size</span>
            <br>
            st.<span style="color: cornflowerblue;">subheader</span> (<span style="color: coral;">"Kontribusi per Jam"</span>)
            <br>
            <br>
            fig_hour <span style="color: fuchsia;">=</span> plt.<span style="color: cornflowerblue">figure</span> (figsize <span style="color: fuchsia;">=</span> (<span style="color: chartreuse">12</span>, <span style="color: chartreuse">6</span>)) <span style="color: darkgray;"># Set the figsize parameter to adjust the size</span>
            <br>
            sns.<span style="color: cornflowerblue;">lineplot</span> (x <span style="color: fuchsia;">=</span> <span style="color: coral;">'hr'</span>, y <span style="color: fuchsia;">=</span> <span style="color: coral;">'avg_casual'</span>, data <span style="color: fuchsia;">=</span> contribution_by_hour, label <span style="color: fuchsia;">=</span> <span style="color: coral;">'Casual'</span>, marker <span style="color: fuchsia;">=</span> <span style="color: coral;">'o'</span>)
            <br>
            sns.<span style="color: cornflowerblue;">lineplot</span> (x <span style="color: fuchsia;">=</span> <span style="color: coral;">'hr'</span>, y <span style="color: fuchsia;">=</span> <span style="color: coral;">'avg_register'</span>, data <span style="color: fuchsia;">=</span> contribution_by_hour, label <span style="color: fuchsia;">=</span> <span style="color: coral;">'Registered'</span>, marker <span style="color: fuchsia;">=</span> <span style="color: coral;">'o'</span>)
            <br>
            sns.<span style="color: cornflowerblue;">lineplot</span> (x <span style="color: fuchsia;">=</span> <span style="color: coral;">'hr'</span>, y <span style="color: fuchsia;">=</span> <span style="color: coral;">'total_average'</span>, data <span style="color: fuchsia;">=</span> contribution_by_hour, label <span style="color: fuchsia;">=</span> <span style="color: coral;">'Total Average'</span>, marker <span style="color: fuchsia;">=</span> <span style="color: coral;">'o'</span>)
            <br>
            plt.<span style="color: cornflowerblue;">xticks</span> (contribution_by_hour <span style="color: burlywood;">[</span><span style="color: coral;">'hr'</span><span style="color: burlywood;">]</span>)
            <br>
            plt.<span style="color: cornflowerblue;">legend</span> ()
            <br>
            st.<span style="color: cornflowerblue;">pyplot</span> (fig_hour)
            <br>
            <br>
            <span style="color: darkgray;"># Display contribution by hour table</span>
            <br>
            st.<span style="color: cornflowerblue;">subheader</span> (<span style="color: coral;">"Tabel Kontribusi per Jam"</span>)
            <br>
            st.<span style="color: cornflowerblue;">table</span> (contribution_by_hour.<span style="color: cornflowerblue;">set_index</span> (<span style="color: coral">'hr'</span>))
            <br>
            <br>
            <span style="color: darkgray;"># Display summary for rents_by_day</span>
            <br>
            st.<span style="color: cornflowerblue;">subheader</span> (<span style="color: coral;">"Analisa Sewa per Musim"</span>)
            <br>
            <br>
            summary_text <span style="color: fuchsia;">=</span> <span style="color: coral;">"""</span>
            <br>
            <span style="color: coral;">**Pertanyaan 1**</span>
            <br>
            <br>
            <span style="color: coral;">Bagaimana permintaan sewa sepeda bervariasi di berbagai musim?</span>
            <br>
            <span style="color: coral;">Berdasarkan data yang diperoleh, kita dapat mengetahui bahwa :</span>
            <br>
            <span style="color: coral;">"""</span>
            <br>
            <br>
            view_more <span style="color: fuchsia;">=</span> st.<span style="color: cornflowerblue;">checkbox</span> (<span style="color: coral;">"View More"</span>)
            <br>
            <br>
            <span style="color: aquamarine;">if</span> view_more:
            <br>
            <span style="padding-left: 35px;">full_summary_text</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">"""</span>
            <br>
            <span style="padding-left: 35px; color: coral;">**Pertanyaan 1**</span>
            <br>
            <br>
            <span style="padding-left: 35px; color: coral;">Bagaimana permintaan sewa sepeda bervariasi di berbagai musim?</span>
            <br>
            <span style="padding-left: 35px; color: coral;">Berdasarkan data yang diperoleh, kita dapat mengetahui bahwa :</span>
        </code>
        <ol style="padding-left: 55px; color: coral;">
            <li> Musim Gugur (Fall) adalah musim yang paling banyak orang menyewa sepeda dibanding musim lainnya. Hal ini menunjukkan minat orang-orang lebih tinggi untuk melakukan sewa sepeda pada musim gugur.</li>
            <li>Musim Semi (Spring) merupakan musim dengan rata-rata sewa sepeda terendah. Hal ini mungkin menunjukkan bahwa cuaca atau faktor lain mempengaruhi minat orang-orang untuk menyewa sepeda.</li>
            <li>Musim Panas memiliki rata-rata sewa sepeda yang lebih tinggi dibanding musim dingin. Kemungkinan ini terjadi karena cuaca yang lebih hangat dan kondisi yang lebih menguntungkan untuk bersepeda selama musim panas.</li>
            <li>Terdapat perbedaan yang signifikan antara rata-rata sewa pada musim gugur dengan musim lainnya karena beberapa faktor seperti festival, acara khusus, dan kondisi lainnya.</li>
        </ol>
        <code>
            <span style="padding-left: 35px; color: coral;">"""</span>
            <br>
            <span style="padding-left: 35px;">st.</span><span style="color: cornflowerblue;">write</span> (full_summary_text)
            <br>
            <span style="color: aquamarine;">else</span>:
            <br>
            <span style="padding-left: 35px;">st.</span><span style="color: cornflowerblue;">write</span> (summary_text)
            <br>
            <br>
            <br>
            <span style="color: darkgray;"># Display summary for contribution_by_hour</span>
            <br>
            st.<span style="color: cornflowerblue">subheader</span> (<span style="color: coral;">"Analisa Kontribusi per Jam"</span>)
            <br>
            <br>
            summary_text_2 <span style="color: fuchsia;">=</span> <span style="color: coral;">"""</span>
            <br>
            <span style="color: coral;">**Pertanyaan 2**</span>
            <br>
            <br>
            <span style="color: coral;">Bagaimana kontribusi pengguna casual dan terdaftar terhadap jumlah sewa sepeda per jam?</span>
            <br>
            <span style="color: coral;">Berdasarkan data yang diperoleh, dapat kita ketahui :</span>
            <br>
            <span style="color: coral;">"""</span>
            <br>
            <br>
            view_more_2 <span style="color: fuchsia;">=</span> st.<span style="color: cornflowerblue;">checkbox</span> (<span style="color: coral;">"View More..."</span>)
            <br>
            <br>
            <span style="color: aquamarine;">if</span> view_more_2:
            <br>
            <span style="padding-left: 35px;">full_summary_text_2</span> <span style="color: fuchsia;">=</span> <span style="color: coral;">"""</span>
            <br>
            <span style="padding-left: 35px; color: coral;">**Pertanyaan 2**</span>
            <br>
            <br>
            <span style="padding-left: 35px; color: coral;">Bagaimana kontribusi pengguna casual dan terdaftar terhadap jumlah sewa sepeda per jam?</span>
            <br>
            <span style="padding-left: 35px; color: coral;">Berdasarkan data yang diperoleh, dapat kita ketahui :</span>
        </code>
        <ol style="padding-left: 55px; color: coral;"">
            <li>Jam 17 (5:00 PM) memiliki total rata-rata sewa sepeda per jam tertinggi, mencapai 461.</li>
            <li>Jam 8 (8:00 AM) dan jam 18 (6:00 PM) juga merupakan jam-jam dengan kontribusi tinggi, dengan total rata-rata masing-masing 359 dan 425.</li>
            <li>Pengguna terdaftar memberikan kontribusi yang lebih besar dibandingkan pengguna casual pada setiap jam.</li>
            <li>Terdapat perbedaan yang signifikan antara rata-rata kontribusi pengguna casual dan terdaftar pada beberapa jam tertentu. Sebagai contoh, pada jam 17 (5:00 PM), kontribusi pengguna terdaftar mencapai 387, sementara pengguna casual hanya 74.</li>
            <li>Kontribusi pengguna casual dan terdaftar cenderung meningkat selama jam sibuk, terutama pada jam 8 (8:00 AM) dan jam 17 (5:00 PM).</li>
        </ol>
        <code>
            <span style="padding-left: 35px; color: coral;">"""</span>
            <br>
            <span style="padding-left: 35px;">st.</span><span style="color: cornflowerblue;">write</span> (full_summary_text_2)
            <br>
            <span style="color: aquamarine;">else</span>:
            <br>
            <span style="padding-left: 35px;">st.</span><span style="color: cornflowerblue;">write</span> (summary_text_2)
            <br>
            <br>
            <br>
            <br>
            <br>
            st.<span style="color: cornflowerblue;">caption</span> (<span style="color: coral;">'Revardy D. Caear (c) 2023 | Proyek Analisis Data : Bike Sharing Dataset'</span>)
        </code>
    </div>
    <script src="../../js/dashboard.js" type="text/javascript"></script>
</body>
</html>